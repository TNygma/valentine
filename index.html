<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Will you be my valentine?</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Quicksand:wght@500;700&display=swap');

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      overflow-x: hidden;
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(135deg, #ffb7c5 0%, #ff9aab 25%, #ff85a2 50%, #ff6b8a 75%, #ff4d6d 100%);
      position: relative;
    }

    /* Floating hearts background */
    .hearts-bg {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 0;
    }

    .heart {
      position: absolute;
      font-size: 1.5rem;
      opacity: 0.35;
      animation: float 8s ease-in-out infinite;
    }

    .heart:nth-child(1) { left: 5%; top: 10%; animation-delay: 0s; }
    .heart:nth-child(2) { left: 15%; top: 70%; animation-delay: 1s; font-size: 1.2rem; }
    .heart:nth-child(3) { left: 25%; top: 30%; animation-delay: 2s; font-size: 1.8rem; }
    .heart:nth-child(4) { left: 45%; top: 85%; animation-delay: 0.5s; }
    .heart:nth-child(5) { left: 55%; top: 15%; animation-delay: 1.5s; font-size: 1.3rem; }
    .heart:nth-child(6) { left: 70%; top: 50%; animation-delay: 2.5s; }
    .heart:nth-child(7) { left: 85%; top: 25%; animation-delay: 0.8s; font-size: 1.6rem; }
    .heart:nth-child(8) { left: 90%; top: 75%; animation-delay: 1.2s; }
    .heart:nth-child(9) { left: 35%; top: 45%; animation-delay: 3s; font-size: 1.1rem; }
    .heart:nth-child(10) { left: 75%; top: 90%; animation-delay: 2s; }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-15px) rotate(5deg); }
    }

    .container {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      text-align: center;
    }

    .ask-wrap {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 1rem;
    }

    h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2.5rem, 7.5vw, 4.25rem);
      color: #5c2a3a;
      margin: 0 0 1.5rem;
      text-shadow:
        0 2px 4px rgba(92, 42, 58, 0.12),
        0 4px 12px rgba(92, 42, 58, 0.08),
        0 0 40px rgba(255, 255, 255, 0.15);
      animation: titleGlow 4s ease-in-out infinite;
    }

    @keyframes titleGlow {
      0%, 100% { opacity: 1; text-shadow: 0 2px 4px rgba(92, 42, 58, 0.12), 0 4px 12px rgba(92, 42, 58, 0.08), 0 0 40px rgba(255, 255, 255, 0.15); }
      50% { opacity: 0.95; text-shadow: 0 2px 6px rgba(92, 42, 58, 0.18), 0 6px 18px rgba(92, 42, 58, 0.12), 0 0 50px rgba(255, 255, 255, 0.25); }
    }

    .gif-placeholder {
      width: min(420px, 92vw);
      background: rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      margin-bottom: 2.5rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: #5c2a3a;
      font-size: 1rem;
      border: 1px solid rgba(92, 42, 58, 0.15);
      box-shadow:
        0 4px 12px rgba(92, 42, 58, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.6);
      overflow: hidden;
    }

    .gif-placeholder img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 14px;
    }

    .buttons-wrap {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 2.5rem;
      min-height: 80px;
      min-width: 280px;
    }

    .buttons-no-spacer {
      flex-shrink: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .btn {
      font-family: 'Quicksand', sans-serif;
      font-weight: 700;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.25s ease;
      flex-shrink: 0;
      position: relative;
      background: #fff;
      color: #5c2a3a;
      box-shadow:
        0 2px 4px rgba(0, 0, 0, 0.1),
        0 4px 12px rgba(92, 42, 58, 0.12),
        inset 0 1px 0 rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(92, 42, 58, 0.2);
    }

    .btn:hover {
      box-shadow: 0 6px 20px rgba(92, 42, 58, 0.18);
    }

    .btn-yes {
      font-size: 1.15rem;
      padding: 0.9rem 1.9rem;
      transform: scale(var(--yes-scale, 1));
      transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.25s ease, background 0.2s ease, color 0.2s ease;
    }

    .btn-yes:hover {
      transform: scale(var(--yes-scale, 1)) scale(1.05);
    }

    .btn-yes.green {
      background: linear-gradient(145deg, #70AE6E, #5a9258);
      color: white;
      box-shadow:
        0 2px 4px rgba(0, 0, 0, 0.15),
        0 6px 20px rgba(112, 174, 110, 0.35),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    .btn-yes.green:hover {
      transform: scale(var(--yes-scale, 1)) scale(1.05);
    }

    .btn-no {
      font-size: 1.15rem;
      padding: 0.9rem 1.9rem;
      transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.25s ease;
    }

    .btn-no.running {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(calc(-50% + var(--no-dx, 0px)), calc(-50% + var(--no-dy, 0px)));
    }

    .btn-no.running:hover {
      transform: translate(calc(-50% + var(--no-dx, 0px)), calc(-50% + var(--no-dy, 0px))) scale(1.05);
    }

    .ask-wrap.hidden {
      display: none;
    }

    .buttons-wrap.hidden {
      display: none;
    }

    .yay-wrap {
      display: none;
      flex-direction: column;
      align-items: center;
      animation: popIn 0.5s ease;
    }

    .yay-wrap.visible {
      display: flex;
    }

    .yay-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(3rem, 9vw, 5rem);
      color: #5c2a3a;
      margin: 0 0 1.5rem;
      text-shadow:
        0 2px 4px rgba(92, 42, 58, 0.12),
        0 6px 20px rgba(92, 42, 58, 0.15);
    }

    .yay-gif {
      width: min(420px, 92vw);
      background: rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: #5c2a3a;
      font-size: 1rem;
      border: 1px solid rgba(92, 42, 58, 0.15);
      box-shadow:
        0 4px 12px rgba(92, 42, 58, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.6);
      overflow: hidden;
    }

    .yay-gif img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 14px;
    }

    @keyframes popIn {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
  </style>
</head>
<body>
  <div class="hearts-bg" aria-hidden="true">
    <span class="heart">‚ù§Ô∏è</span>
    <span class="heart">üíï</span>
    <span class="heart">‚ù§Ô∏è</span>
    <span class="heart">üíó</span>
    <span class="heart">‚ù§Ô∏è</span>
    <span class="heart">üíï</span>
    <span class="heart">üíó</span>
    <span class="heart">‚ù§Ô∏è</span>
    <span class="heart">üíï</span>
    <span class="heart">üíó</span>
  </div>

  <div class="container">
    <div class="ask-wrap" id="askWrap">
      <h1>Will you be my valentine?</h1>
    <div class="gif-placeholder" id="mainGif">
      <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNmp3azJrZHgwZnB0N2Z0cHFpcm5naGQwbjNkNXZvbXlmMDNlYjk4byZlcD12MV9naWZzX3NlYXJjaCZjdD1n/qtOPebMHEzXwx8negT/giphy.gif" alt="">
    </div>
    </div>

    <div class="buttons-wrap" id="buttonsWrap">
      <button type="button" class="btn btn-yes" id="btnYes">YES</button>
      <button type="button" class="btn btn-no" id="btnNo">NO</button>
    </div>

    <div class="yay-wrap" id="yayWrap">
      <h2 class="yay-title">YAY!</h2>
      <div class="yay-gif" id="yayGif">
        <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNmp3azJrZHgwZnB0N2Z0cHFpcm5naGQwbjNkNXZvbXlmMDNlYjk4byZlcD12MV9naWZzX3NlYXJjaCZjdD1n/7zfweQR6bUvu4JF4DW/giphy.gif" alt="">
      </div>
    </div>
  </div>

  <script>
    (function () {
      const btnYes = document.getElementById('btnYes');
      const btnNo = document.getElementById('btnNo');
      const buttonsWrap = document.getElementById('buttonsWrap');
      const askWrap = document.getElementById('askWrap');
      const yayWrap = document.getElementById('yayWrap');

      let noClickCount = 0;
      let directionIndex = 0;

      function getRandomOffset() {
        const angle = (directionIndex % 8) * 45 + Math.random() * 25;
        directionIndex++;
        var minDist = 70 + noClickCount * 50;
        var maxDist = 120 + noClickCount * 65;
        const dist = minDist + Math.random() * (maxDist - minDist);
        const rad = (angle * Math.PI) / 180;
        return {
          x: Math.cos(rad) * dist,
          y: Math.sin(rad) * dist,
        };
      }

      function getRect(el) {
        const r = el.getBoundingClientRect();
        const wrap = buttonsWrap.getBoundingClientRect();
        return {
          left: r.left - wrap.left,
          top: r.top - wrap.top,
          width: r.width,
          height: r.height,
        };
      }

      function overlaps(a, b, padding) {
        padding = padding || 20;
        return !(
          a.left + a.width + padding < b.left ||
          b.left + b.width + padding < a.left ||
          a.top + a.height + padding < b.top ||
          b.top + b.height + padding < a.top
        );
      }

      function clampOffsetToViewport(offX, offY, noWidth, noHeight) {
        const wrapRect = buttonsWrap.getBoundingClientRect();
        const centerX = wrapRect.left + wrapRect.width / 2;
        const centerY = wrapRect.top + wrapRect.height / 2;
        const noLeftVp = centerX + offX - noWidth / 2;
        const noTopVp = centerY + offY - noHeight / 2;
        const noRightVp = noLeftVp + noWidth;
        const noBottomVp = noTopVp + noHeight;
        const pad = 8;
        let dx = offX;
        let dy = offY;
        if (noLeftVp < pad) dx = offX + (pad - noLeftVp);
        if (noRightVp > window.innerWidth - pad) dx = offX - (noRightVp - (window.innerWidth - pad));
        if (noTopVp < pad) dy = offY + (pad - noTopVp);
        if (noBottomVp > window.innerHeight - pad) dy = offY - (noBottomVp - (window.innerHeight - pad));
        return { x: dx, y: dy };
      }

      function ensureNoSpacer() {
        let spacer = buttonsWrap.querySelector('.buttons-no-spacer');
        if (!spacer) {
          spacer = document.createElement('span');
          spacer.className = 'buttons-no-spacer';
          spacer.setAttribute('aria-hidden', 'true');
          btnYes.after(spacer);
        }
        spacer.style.width = btnNo.offsetWidth + 'px';
        spacer.style.height = btnNo.offsetHeight + 'px';
      }

      function positionNoButton() {
        btnNo.classList.add('running');
        ensureNoSpacer();
        const wrapRect = buttonsWrap.getBoundingClientRect();
        const yesRect = getRect(btnYes);
        const noWidth = btnNo.offsetWidth;
        const noHeight = btnNo.offsetHeight;
        let bestDx = 100;
        let bestDy = 0;

        for (let i = 0; i < 50; i++) {
          let off = getRandomOffset();
          off = clampOffsetToViewport(off.x, off.y, noWidth, noHeight);
          const noLeft = wrapRect.width / 2 + off.x - noWidth / 2;
          const noTop = wrapRect.height / 2 + off.y - noHeight / 2;
          const proposed = {
            left: noLeft,
            top: noTop,
            width: noWidth,
            height: noHeight,
          };
          if (!overlaps(proposed, yesRect)) {
            bestDx = off.x;
            bestDy = off.y;
            break;
          }
          bestDx = off.x;
          bestDy = off.y;
        }

        const clamped = clampOffsetToViewport(bestDx, bestDy, noWidth, noHeight);
        btnNo.style.setProperty('--no-dx', clamped.x + 'px');
        btnNo.style.setProperty('--no-dy', clamped.y + 'px');
      }

      // YES growth: configurable curve (no growth first 2 clicks, then diminishing returns)
      const YES_GROWTH_START_AFTER_CLICKS = 2;
      const YES_GROWTH_NEAR_FULL_AT_CLICKS = 10;
      const YES_MAX_SCALE = 12;
      const YES_GROWTH_EASE_FACTOR = 3;

      function getYesScale() {
        if (noClickCount < YES_GROWTH_START_AFTER_CLICKS) return 1;
        const progress = Math.min(1, (noClickCount - YES_GROWTH_START_AFTER_CLICKS) / (YES_GROWTH_NEAR_FULL_AT_CLICKS - YES_GROWTH_START_AFTER_CLICKS));
        const ease = 1 - Math.exp(-YES_GROWTH_EASE_FACTOR * progress);
        return 1 + (YES_MAX_SCALE - 1) * ease;
      }

      function applySizes() {
        const yesScale = getYesScale();
        btnYes.style.setProperty('--yes-scale', String(yesScale));
        btnYes.classList.toggle('green', noClickCount >= 5);
      }

      btnYes.addEventListener('click', function () {
        askWrap.classList.add('hidden');
        buttonsWrap.classList.add('hidden');
        yayWrap.classList.add('visible');
      });

      btnNo.addEventListener('click', function () {
        noClickCount++;
        applySizes();
        positionNoButton();
      });

      applySizes();
    })();
  </script>
</body>
</html>
